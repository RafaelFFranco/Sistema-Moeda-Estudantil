<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seu cupom de resgate</title>
</head>
<body style="margin:0;padding:0;background:#f4f4f7;font-family:Arial,Helvetica,sans-serif;">
  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="max-width:680px;margin:0 auto;background:#ffffff;border-radius:8px;overflow:hidden;">
    <tr>
      <td style="background:linear-gradient(90deg,#2563EB 0%,#10B981 100%);padding:20px;color:#fff;text-align:center;">
        <h1 style="margin:0;font-size:20px;">Resgate realizado</h1>
        <div style="margin-top:6px;font-size:14px;opacity:0.95;">Obrigado por usar o Moeda Estudantil</div>
      </td>
    </tr>
    <tr>
      <td style="padding:24px;">

        <p style="margin:0 0 12px 0;color:#374151;font-size:15px;">Olá <strong th:text="${nomeAluno}">Aluno</strong>,</p>
        <p style="margin:0 0 18px 0;color:#4B5563;font-size:14px;">
          Você acabou de resgatar <strong th:text="${nomeVantagem}">[Vantagem]</strong> na 
          <strong th:text="${nomeEmpresa}">[Empresa]</strong>. Abaixo está o cupom para apresentar no estabelecimento.
        </p>

        <!-- ========== IMAGEM DA VANTAGEM ========== -->
        <div style="text-align:center;margin-bottom:20px;">
          <img th:src="${imagemUrl}" alt="Imagem da vantagem" 
               style="max-width:220px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.08);">
        </div>

        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="margin:18px 0 20px 0;">
          <tr>
            <td style="text-align:center;padding:18px;border-radius:8px;background:#f8fafc;">
              <div style="display:inline-block;text-align:center;padding:18px 22px;border-radius:8px;background:#fff;box-shadow:0 6px 18px rgba(2,6,23,0.06);">
                <div style="font-size:12px;color:#6B7280;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:6px;">Cupom</div>
                <div style="font-family:monospace;font-size:28px;font-weight:800;color:#111827;" th:text="${cupom}">ABC12345</div>
                <div style="margin-top:8px;font-size:13px;color:#6B7280;" 
                     th:if="${cupomValidade != null}" 
                     th:text="'Válido até: ' + ${cupomValidade}">
                  Válido até: 01/01/2026
                </div>
                <!-- QR Code inline (cid:qrcode) gerado e anexado pelo backend -->
                <div style="margin-top:12px;text-align:center;">
                  <img src="cid:qrcode" alt="QR Code do cupom" style="width:180px;height:180px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.08);">
                </div>
              </div>
            </td>
          </tr>
        </table>

        <p style="margin:0 0 6px 0;color:#4B5563;font-size:13px;">Instruções rápidas:</p>
        <ul style="margin:6px 0 18px 18px;color:#4B5563;font-size:13px;">
          <li>Apresente este cupom no estabelecimento participante.</li>
          <li>Validade e termos podem ser aplicados pela empresa parceira.</li>
          <li>Este cupom é único e intransferível.</li>
        </ul>

        <p style="margin:22px 0 0 0;color:#9CA3AF;font-size:12px;">
          Se você não solicitou este resgate, entre em contato com sua instituição imediatamente.
        </p>

      </td>
    </tr>
    <tr>
      <td style="background:#f9fafb;padding:14px;text-align:center;color:#9CA3AF;font-size:12px;">
        Moeda Estudantil &bull; Sistema de resgates
      </td>
    </tr>
  </table>
</body>
</html>
